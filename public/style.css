
:root{
  --bg:#070b14; --panel:#0c1222; --text:#e7ebf6; --muted:#9fb0cf;
  --accent:#7dd3fc; --accent2:#a78bfa; --danger:#ff4976; --ok:#31e18f;
  --ring: rgba(125,211,252,.35);
  --border: color-mix(in oklab,var(--text),transparent 90%);
  --radius: 18px; --shadow: 0 24px 50px rgba(0,0,0,.35); --grid-glow: rgba(125,211,252,.08);
}
@media (prefers-color-scheme: light){
  :root{ --bg:#f7f9ff; --panel:#ffffff; --text:#0b1020; --muted:#52607a;
         --accent:#0ea5e9; --accent2:#7c3aed; --border:rgba(0,0,0,.08); --shadow:0 18px 36px rgba(2,6,23,.08); }
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font:16px/1.6 Inter,ui-sans-serif,system-ui,Segoe UI,Roboto}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
.wrap{max-width:1080px;margin:auto;padding:0 20px}
.bg-wire{position:fixed;inset:0;pointer-events:none;z-index:0;background:
  radial-gradient(600px 300px at 20% 30%, color-mix(in oklab,var(--accent),transparent 75%), transparent 60%),
  radial-gradient(720px 360px at 80% 15%, color-mix(in oklab,var(--accent2),transparent 75%), transparent 60%);}
.bg-grid{position:fixed;inset:0;pointer-events:none;z-index:0;background:
  repeating-linear-gradient(0deg, transparent, transparent 48px, var(--grid-glow) 49px),
  repeating-linear-gradient(90deg, transparent, transparent 48px, var(--grid-glow) 49px);
  opacity:.35;animation: gridPulse 7s ease-in-out infinite;}
@keyframes gridPulse{0%,100%{opacity:.25; filter:hue-rotate(0deg)}50%{opacity:.45; filter:hue-rotate(20deg)}}
body[data-mode="judge"]{ --accent:#6db7ff; --accent2:#5c8cff; }
body[data-mode="opposition"]{ --accent:#ff6b6b; --accent2:#ff3b7a; }
body[data-mode="coach"]{ --accent:#38e0ff; --accent2:#76b5ff; }
header{position:sticky;top:0;z-index:10;background:color-mix(in oklab,var(--bg),#000 6%);border-bottom:1px solid var(--border);backdrop-filter:saturate(120%) blur(8px)}
.nav{display:flex;align-items:center;justify-content:space-between;padding:.8rem 0}
.logo{display:flex;gap:.6rem;align-items:center;font-weight:900;letter-spacing:.2px}
.logo svg{width:28px;height:28px}
.btn{display:inline-flex;align-items:center;gap:.6rem;padding:.8rem 1.1rem;border-radius:999px;border:1px solid transparent;
  background:linear-gradient(135deg,var(--accent),var(--accent2));color:#061018;font-weight:800;box-shadow:var(--shadow);position:relative;overflow:hidden}
.btn.ghost{background:transparent;border:1px solid var(--border);color:var(--text)}
.btn:focus{outline:none;box-shadow:0 0 0 6px var(--ring)}
.btn::after{content:"";position:absolute;inset:auto;left:50%;top:50%;width:0;height:0;border-radius:999px;background:color-mix(in oklab,var(--accent),#fff 10%);
  transform:translate(-50%,-50%);opacity:.35;transition:width .35s ease,height .35s ease,opacity .35s ease;}
.btn:active::after{width:180%;height:180%;opacity:0}
.app{position:relative;z-index:1;display:grid;grid-template-columns:1fr 320px;gap:1rem;padding:1rem 0}
.panel{background:var(--panel);border:1px solid var(--border);border-radius:18px}
.pad{padding:1rem}
.messages{display:flex;flex-direction:column;gap:.75rem;max-height:65vh;overflow:auto;padding:1rem}
.msg{border:1px solid var(--border);border-radius:14px;padding:.8rem 1rem;background:color-mix(in oklab,var(--panel),#000 6%);opacity:0;transform:translateY(8px)}
.msg.user{border-color:color-mix(in oklab,var(--accent),transparent 60%);}
.msg.ai{border-color:color-mix(in oklab,var(--accent2),transparent 60%);}
.msg.enter{animation: fadeUp .45s ease forwards}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
.meta{display:flex;gap:.6rem;align-items:center;font-size:.8rem;color:var(--muted);margin-top:.4rem}
.meta .badge{border:1px dashed var(--border);border-radius:999px;padding:.2rem .5rem}
.meta .ref{opacity:.9}
.typing{align-self:flex-start;display:inline-flex;gap:.35rem;align-items:center;border:1px solid var(--border);border-radius:999px;padding:.4rem .7rem;background:color-mix(in oklab,var(--panel),#000 4%);box-shadow:0 0 22px color-mix(in oklab,var(--accent2),transparent 70%)}
.dot{width:6px;height:6px;border-radius:999px;background:var(--accent);animation:bounce 1.2s infinite}
.dot:nth-child(2){animation-delay:.15s}.dot:nth-child(3){animation-delay:.3s}
@keyframes bounce{0%,100%{transform:translateY(0);opacity:.4}50%{transform:translateY(-4px);opacity:1}}
.input{display:flex;gap:.6rem;align-items:center;padding:1rem;border-top:1px solid var(--border)}
.input input, .input textarea{flex:1;background:transparent;color:var(--text);border:1px solid var(--border);border-radius:12px;padding:.8rem}
.controls{display:flex;gap:.5rem;align-items:center}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;border:1px solid var(--border);background:transparent;transition:box-shadow .25s ease}
.icon-btn:hover{box-shadow:0 0 14px color-mix(in oklab,var(--accent),transparent 70%)}
.progress{height:8px;border-radius:6px;background:color-mix(in oklab,var(--panel),#000 6%);border:1px solid var(--border);overflow:hidden}
.progress .bar{height:100%;width:0%;background:linear-gradient(90deg, color-mix(in oklab,var(--accent),transparent 20%), color-mix(in oklab,var(--accent2),transparent 20%));
  background-size:200% 100%;animation: shimmer 1.2s linear infinite}
@keyframes shimmer{to{background-position:-200% 0}}
.side{display:flex;flex-direction:column;gap:.8rem;padding:1rem;max-height:65vh;overflow:auto}
.file{display:flex;align-items:center;justify-content:space-between;gap:.6rem;border:1px dashed var(--border);border-radius:12px;padding:.6rem .7rem}
.file .name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.file .del{color:#ff7f9a}
.small{font-size:.85rem;color:var(--muted)}
.canvas-wrap{position:relative;height:120px;background:transparent;border:1px solid var(--border);border-radius:12px;overflow:hidden}
#vizWave{width:100%;height:100%}
.bars{display:grid;gap:.6rem}
.bar-row{display:flex;align-items:center;gap:.6rem}
.bar-row .label{width:120px}
.bar-row .meter{flex:1;height:10px;border:1px solid var(--border);border-radius:8px;overflow:hidden;background:color-mix(in oklab,var(--panel),#000 6%)}
.bar-row .fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0%}
.score{font-weight:800}
